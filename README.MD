# Node.js + Fastify + Drizzle + Docker + PostgreSQL + TypeScript â€” Boilerplate

Este repositÃ³rio Ã© uma estrutura inicial para projetos backend modernos com:

- Node.js (v20+ com suporte nativo a TypeScript)
- Fastify (framework web rÃ¡pido e minimalista)
- Drizzle ORM (para banco de dados PostgreSQL)
- Docker (ambiente isolado e containerizado)
- TypeScript com configuraÃ§Ã£o otimizada
- Biome (formataÃ§Ã£o e linting com ultracite)

---

## ğŸš€ Setup Inicial

### 1. Inicializar projeto com PNPM

```bash
pnpm init
pnpm i typescript @types/node -D
npx tsc --init
```

### 2. Configurar `tsconfig.json`

- Busque um `tsconfig` base atualizado compatÃ­vel com a sua versÃ£o do Node no repositÃ³rio oficial.
- Substitua seu `tsconfig.json` pelo arquivo copiado do npm.
- Adicione as opÃ§Ãµes:

```json
{
  "noEmit": true,
  "allowImportingTsExtensions": true
}
```

> **ExplicaÃ§Ã£o:**  
> - `"noEmit": true` impede a geraÃ§Ã£o de arquivos `.js`, pois Node 20+ entende TS nativamente.  
> - `"allowImportingTsExtensions": true` permite importar arquivos `.ts` diretamente.

### 3. Atualizar `package.json`

Adicione:

```json
"type": "module"
```

Para habilitar mÃ³dulos ES no Node.js.

---

## ğŸ“¦ Instalar DependÃªncias Principais

```bash
pnpm i fastify @fastify/cors fastify-type-provider-zod zod postgres drizzle-orm
pnpm i drizzle-kit drizzle-seed -D
pnpm i @biomejs/biome -D
```

---

## ğŸ› ï¸ Scripts Ãšteis

No `package.json`, crie scripts:

```json
{
  "scripts": {
    "dev": "node --experimental-strip-types src/server.ts",
    "start": "node --experimental-strip-types src/server.ts",
    "biome:init": "npx ultracite init"
  }
}
```

> Use `dev` para desenvolvimento com watch (se implementar), `start` para produÃ§Ã£o.

---

## ğŸ³ Docker (ContainerizaÃ§Ã£o)

- Use o Docker para criar ambientes isolados e consistentes.
- Comandos Ãºteis:

```bash
docker ps               # lista containers ativos
docker compose up -d    # sobe containers em segundo plano (detach)
```

---

## ğŸ“š Drizzle ORM e Migrations

Para trabalhar com banco PostgreSQL e Drizzle:

```bash
npx drizzle-kit generate   # gera arquivos de migraÃ§Ã£o
npx drizzle-kit migrate    # executa migraÃ§Ãµes no banco
npx drizzle-kit studio     # interface visual para migraÃ§Ãµes
```

---

## ğŸŒ± Populando o banco (Seed)

```bash
pnpm i drizzle-seed -D
```

Utilize o `drizzle-seed` para popular dados iniciais no banco.

---

## ğŸ§¹ Ordem Recomendada de CriaÃ§Ã£o dos Arquivos e MÃ³dulos

1. `server.ts` â€” entrada principal do servidor Fastify  
2. `config/` â€” configuraÃ§Ã£o geral e variÃ¡veis de ambiente  
3. `env.ts` â€” validaÃ§Ã£o e tipagem das variÃ¡veis de ambiente  
4. `docker/` â€” arquivos Dockerfile, docker-compose.yml etc  
5. ConfiguraÃ§Ã£o do `biome` â€” formataÃ§Ã£o e linting  
6. `db/` â€” conexÃ£o, schema e migrations com Drizzle  
7. Rotas e controllers HTTP

---

## ğŸ“– ReferÃªncias e Links Ãšteis

- [Fastify](https://www.fastify.io/)  
- [Drizzle ORM](https://orm.drizzle.team/)  
- [Biome (Ultracite)](https://biomejs.dev/)  
- [Docker](https://docs.docker.com/)  
- [Node.js ES Modules](https://nodejs.org/api/esm.html)  

---
